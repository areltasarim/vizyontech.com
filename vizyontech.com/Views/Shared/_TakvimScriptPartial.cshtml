<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.css" rel="stylesheet" />
<script src="~/Content/fullcalendar/dist~/Content/fullcalendar/dist/fullcalendar.min.css"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.print.css" rel="stylesheet" media="print" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>
<script src="~/Content/fullcalendar/dist~/Content/fullcalendar/dist/fullcalendar.min.js"></script>

<script>

    $(document).ready(function () {

        var events = [];
        $.ajax({
            type: "GET",
            url: "/Home/TakvimListele/",
                data: events,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, v) {
                    events.push({
                        title: v.Baslik,
                        description: v.Aciklama,
                        start: moment(v.BaslangicTarihi),
                        end: v.BitisTarihi != null ? moment(v.BitisTarihi) : null,
                        color: v.Renk,
                        allDay: true
                    });
                    console.log("Takvim = " + v.Renk);
                })

                GenerateCalender(events);
            },
            error: function (error) {
                alert('failed');
            }
        })

        function GenerateCalender(events) {

            $('#calender').fullCalendar('destroy');
            $('#calender').fullCalendar({

                monthNames: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
                monthNamesShort: ['Ocak', 'Şubat', 'Mart', 'Nisan', 'Mayıs', 'Haziran', 'Temmuz', 'Ağustos', 'Eylül', 'Ekim', 'Kasım', 'Aralık'],
                dayNames: ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],
                dayNamesShort: ['Pazar', 'Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi'],

                editable: true,
                buttonText: {
                    today: 'Bugün',
                    month: 'Ay',
                    week: 'Hafta',
                    day: 'Gün',
                    list: 'Liste',
                    listMonth: 'Aylık Liste',
                    listYear: 'Yıllık Liste',
                    listWeek: 'Haftalık Liste',
                    listDay: 'Günlük Liste',
                    agenda: 'Ajanda',

                },


                contentHeight: 400,
                defaultDate: new Date(),
                timeFormat: 'h(:mm)a',

                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay,agenda',

                },
                eventLimit: true,
                eventLimitText: "daha fazla",
                allDayText: "Tüm gün",
                eventColor: '#378006',
                events: events,
                eventClick: function (calEvent, jsEvent, view) {
                    $('#myModal #eventTitle').text(calEvent.title);
                    var $description = $('<div/>');
                    $description.append($('<p/>').html('<b>Başlangıç Tarihi:</b>' + calEvent.start.format("DD-MMM-YYYY")));
                    if (calEvent.end != null) {
                        $description.append($('<p/>').html('<b>Bitiş Tarihi:</b>' + calEvent.end.format("DD-MMM-YYYY")));
                    }
                    $description.append($('<p/>').html('<b>Açıklama:</b>' + calEvent.description));
                    $('#myModal #pDetails').empty().html($description);

                    $('#myModal').modal();
                }
            })



        }
    })

</script>